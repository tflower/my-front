(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{118:function(t,e,a){"use strict";var n=a(30);a.n(n).a},12:function(t,e,a){"use strict";a(78);var n=a(75),r=a.n(n),s="http://api.portal-api.cyt-rain.cn/",o={get:function(t,e){return r.a.get("".concat(s).concat(t),{params:e}).then(function(t){return t.data.success?Promise.resolve(t.data.info):Promise.reject(t.data.info)}).catch(function(t){return Promise.reject(t.response.data.message)})},post:function(t,e){return r.a.post("".concat(s).concat(t),e).then(function(t){return t.data.success?Promise.resolve(t.data.info):Promise.reject(t.data.info)}).catch(function(t){return console.log(t),Promise.reject(t.response.data.message)})}};e.a=o},239:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-box"},[a("el-header",{staticClass:"f14"},[t._v("\n        项目详情\n    ")]),t._v(" "),a("el-main",[a("el-button",{attrs:{type:"primary"},on:{click:t.goto}},[a("i",{staticClass:"el-icon-plus"}),t._v("\n            添加项目\n        ")]),t._v(" "),a("el-form",{staticClass:"mt20",attrs:{inline:!0,model:t.searchParams}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{placeholder:"项目名称",clearable:""},model:{value:t.searchParams.name,callback:function(e){t.$set(t.searchParams,"name",e)},expression:"searchParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"项目类型"}},[a("el-select",{attrs:{placeholder:"项目类型"},model:{value:t.searchParams.type,callback:function(e){t.$set(t.searchParams,"type",e)},expression:"searchParams.type"}},t._l(t.typeArr,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.gitData}},[a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originUrl",label:"项目地址",width:"400",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"项目类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"status-"+e.row.status,attrs:{type:"text",size:"small"}},[t._v(t._s(e.row.status))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleBuild(e.row)}}},[t._v("发布")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleCheck(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper",total:t.totalCount,"page-size":t.searchParams.pageSize,"current-page":t.searchParams.page},on:{"current-change":t.handleCurrentChange}})],1)],1)};n._withStripped=!0,a(120);var r=a(12),s={data:function(){return{searchParams:{name:"",type:"",pageSize:10,page:1},totalCount:0,gitData:[],typeArr:[{label:"通用应用",value:"univeral-app"},{label:"通用组件",value:"univeral-component"},{label:"通用node服务器",value:"univeral-node"}]}},created:function(){this.getProgramList()},methods:{goto:function(){this.$router.push("/program/addpro")},onSearch:function(){this.searchParams.page=1,this.getProgramList()},handleCurrentChange:function(t){this.searchParams.page=t,this.getProgramList()},getProgramList:function(){var t=this,e=this.searchParams;r.a.get("projects",e).then(function(e){t.gitData=e.data,t.searchParams.page=e.page,t.totalCount=e.total}).catch(function(e){t.$message({message:e,type:"error"})})},handleDelete:function(t){var e=this;this.$confirm("确定要删除".concat(t.name,"项目吗？")).then(function(){e.deleteItem(t.id)})},deleteItem:function(t){r.a.post("",{id:t}).then()},handleCheck:function(t){},handleBuild:function(t){var e=this,a=t.id;console.log(a),r.a.post("projects/".concat(a,"/tasks")).then(function(t){window.open("https://static-assets.cyt-rain.cn/portal-deploy-console/1.0.0/pages/home/index.html?id=".concat(t.id),"_blank"),e.doBuild(a,t.id)})},doBuild:function(t,e){return r.a.get("projects/".concat(t,"/tasks/").concat(e,"/deploy")).then(function(t){}).catch(function(t){})}}},o=(a(118),a(4)),l=Object(o.a)(s,n,[],!1,null,"60799008",null);l.options.__file="src/page/detail.vue",e.default=l.exports},30:function(t,e){}}]);